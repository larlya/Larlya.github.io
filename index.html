<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lara Marie Andres | Portfolio</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Space+Grotesk:wght@500;700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="style.css">
    <style>
  /* Minimale Inline-Styles: nur Canvas-bezogene Dinge (keine Badge- oder Modal-Overrides) */
  .canvas-wrapper { position: relative; width: 100%; height: 360px; margin: 20px auto; max-width: 900px; }
  #gameCanvas { width: 100%; height: 100%; display: block; background: transparent; border-radius: 12px; }
  .combo-display { position: absolute; left: 50%; top: 10px; transform: translateX(-50%); font-weight: 700; color: #FFD93D; text-shadow: 0 2px 8px rgba(0,0,0,0.6); opacity: 0; transition: opacity 0.2s ease; }
  .combo-display.show { opacity: 1; }
  /* Keine Badges-/Modal-Overrides hier ‚Äî das regelt style.css */
  .theme-toggle { outline: none; border: none; }
</style>
</head>
<body>

    <!-- Dark Mode Toggle Button: Moon (visible in light) + Sun (visible in dark) -->
    <button class="theme-toggle" id="themeToggle" aria-label="Toggle Dark Mode">
        <!-- Moon icon (visible in light mode) -->
        <svg class="moon-svg" viewBox="0 0 24 24" width="22" height="22" fill="currentColor" aria-hidden="true" focusable="false">
            <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
        </svg>

        <!-- Sun icon (visible in dark mode) -->
        <svg class="sun-svg" viewBox="0 0 24 24" width="22" height="22" aria-hidden="true" focusable="false">
            <g fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="4" fill="currentColor"/>
                <line x1="12" y1="1.5" x2="12" y2="4.2"/>
                <line x1="12" y1="19.8" x2="12" y2="22.5"/>
                <line x1="4.7" y1="4.7" x2="6.6" y2="6.6"/>
                <line x1="17.4" y1="17.4" x2="19.3" y2="19.3"/>
                <line x1="1.5" y1="12" x2="4.2" y2="12"/>
                <line x1="19.8" y1="12" x2="22.5" y2="12"/>
                <line x1="4.7" y1="19.3" x2="6.6" y2="17.4"/>
                <line x1="17.4" y1="6.6" x2="19.3" y2="4.7"/>
            </g>
        </svg>
    </button>

    <div class="container">
        
        <section class="visible" style="min-height: 90vh;">
            <h2>Hallo, ich bin Lara.</h2>
            
            <h1>Kommunikation mit <br><span class="text-gradient">Substanz & Struktur.</span></h1>
            
            <p>
                Ich verbinde <span class="highlight">Wissenschaft &amp; NGO-Arbeit</span> mit moderner Strategie. 
                Mein Fokus liegt darauf, komplexe Inhalte verst√§ndlich zu machen und digitale Prozesse zu schaffen, die dem Team den R√ºcken freihalten.
            </p>
            
            <p>
                Als <strong>Interim Head of Communications</strong> und Digital Native wei√ü ich: Gute Kommunikation braucht beides ‚Äì das Gef√ºhl f√ºr die richtige Story und das technische Verst√§ndniss.
            </p>

            <p class="scroll-hint" onclick="document.querySelector('section:nth-of-type(2)').scrollIntoView({behavior: 'smooth'})" style="font-size: 0.9rem; margin-top: 50px; opacity: 0.6;">
            ‚Üì Mehr erfahren
            </p>
        </section>

<!-- DECORATIVE RIBBON BACKGROUND -->
<div class="ribbon-bg" aria-hidden="true">
    <div class="ribbon-layer ribbon-1"></div>
    <div class="ribbon-layer ribbon-2"></div>
    <div class="ribbon-layer ribbon-3"></div>
</div>

  <!-- Main flowing ribbon path -->
  <path class="ribbon-path" d="
    M 1600 -100
    Q 1200 100, 900 200
    Q 500 350, 300 500
    Q 50 700, 200 900
    Q 400 1100, 700 1200
    Q 1100 1350, 1400 1500
    Q 1550 1650, 1300 1800
    Q 900 2000, 500 2100
    Q 100 2200, -100 2400
    L -100 2600
    Q 200 2500, 600 2400
    Q 1000 2300, 1400 2100
    Q 1600 1950, 1500 1750
    Q 1300 1500, 900 1350
    Q 500 1200, 300 1050
    Q 100 900, 150 700
    Q 200 500, 500 350
    Q 900 150, 1300 50
    Q 1500 -50, 1600 -100
    Z"
    fill="url(#ribbonGradient)"
    filter="url(#ribbonBlur)"
  />
</svg>

  <!-- Big, flowing path that snakes down the page -->
  <path d="M1440 80
           C1200 160 1000 240 820 320
           C640 400 520 520 380 620
           C240 720 140 820 40 920
           L40 1400
           L1440 1400
           L1440 80 Z"
        fill="url(#flowGradient)"
        opacity="0.18"
        filter="url(#ribbonBlur)"></path>
</svg>

        <section>
            <h3>Lerne mich kennen</h3>
            <p style="margin-bottom: 30px;">Klick dich durch meine Facetten:</p>
            
            <div class="tabs-container">
                <div class="tab-buttons">
                    <button class="tab-btn active" onclick="openTab(event, 'hard-facts')">Hard Facts</button>
                    <button class="tab-btn" onclick="openTab(event, 'behind-scenes')">Hinter den Kulissen</button>
                    <button class="tab-btn" onclick="openTab(event, 'perfect-match')">Perfect Match</button>
                </div>

                <div id="hard-facts" class="tab-content active">
                    <p><strong>Zuletzt (11/2021 bis 12/2025):</strong><br>
                    Kommunikationsmanagerin bei <span class="highlight">EUniWell (Universit√§t zu K√∂ln)</span>.</p>
                    
                    <ul class="check-list">
                        <li><strong>Rollen-Evolution:</strong> Start als Wissenschaftliche Hilfskraft, dann <strong>Kommunikationsmanagerin</strong> mit √úbernahme zus√§tzlicher Aufgabenbereiche<br>
                            ‚Ä¢ 1 Jahr als <strong>Interim Head of Communications</strong> (Internationale Teamleitung)<br>
                            ‚Ä¢ 1 Jahr als <strong>Social Media Lead</strong> (Strategie &amp; Content).
                        </li>
                        <li><strong>Ausbildung:</strong> <span class="highlight">Master of Arts (M.A.)</span> North American Studies<br>
                            (Universit√§t zu K√∂ln, Abschlussnote 1,4).
                        </li>
                        <li><strong>Tech-Stack:</strong> TYPO3, WordPress, Adobe CC, MS Office, Basic Coding (HTML/CSS/Javascript).</li>
                        <li><strong>Zertifikate:</strong> Storytelling, New Work / Agiles Arbeiten, Projektmanagement.</li>
                    </ul>
                </div>

                <div id="behind-scenes" class="tab-content">
                    <div class="profile-header">
                        <img src="profil.jpg" alt="Lara Marie Andres" class="profile-img">
                        <div class="profile-stats">
                            <div class="stat-row"><span class="stat-icon">üëã</span> <span>Lara Marie Andres, 31 Jahre</span></div>
                            <div class="stat-row"><span class="stat-icon">üìç</span> <span>K√∂ln, geboren im Saarland (kenne alle Witze)</span></div>
                            <div class="stat-row"><span class="stat-icon">üá¨üáß</span> <span>Englisch: C1/C2 (Studium und Arbeit auf Englisch)</span></div>
                            <div class="stat-row"><span class="stat-icon">üá´üá∑</span> <span>Franz√∂sisch: A2 (Reicht f√ºr Baguette)</span></div>
                        </div>
                    </div>

                    <p><strong>Mein Mindset & Motivation:</strong></p>
                    <ul class="check-list">
                        <li><strong>Haltung:</strong> Ich verstehe mich als Feministin und blicke <span class="highlight">intersektional</span> auf die Welt. Mein Studium hat meinen Blick f√ºr gesellschaftliche Zusammenh√§nge gesch√§rft.</li>
                        <li><strong>Engagement:</strong> Queere Rechte sind mir ein echtes Anliegen. Beim SCHMIT-Z e.V. habe ich gelernt, wie wichtig Sichtbarkeit ist ‚Äì und wie man sie schafft.</li>
                        <li><strong>Tech-Neugier:</strong> Ich bin der Typ Mensch, der wissen will, <i>wie</i> es funktioniert. Deshalb der VHS-Kurs in Programmierung. Ich nutze Tools nicht nur, ich denke sie mit.</li>
                    </ul>

                    <div class="info-box">                       
                        <strong>Und sonst so?</strong><br>
                        <span style="font-size: 0.95rem; opacity: 0.8;">
                        Bin ich sehr tierlieb und gerne drau√üen. Ich glaube daran, dass Empathie und ein respektvolles Miteinander die Basis f√ºr alles sind ‚Äì im Team genauso wie im Leben.
                        </span>
                    </div>
                </div>

                <div id="perfect-match" class="tab-content">
                    <p><strong>Was ich suche:</strong></p>
                    <p>K√∂ln ist meine Homebase. Aber gute Arbeit macht nicht an der Stadtgrenze halt. Ich suche eine Aufgabe mit <span class="highlight">Wirkung</span>.</p>
                    
                    <ul class="check-list">
                        <li><strong>Das Umfeld:</strong> Meine Wurzeln liegen im Non-Profit-Sektor. Aber ich muss dort nicht bleiben. Ein <strong>wertebasiertes Unternehmen</strong> reizt mich genauso.</li>
                        <li><strong>Ort & Modus:</strong> Ob K√∂ln, Bonn, D√ºsseldorf oder die Region ‚Äì f√ºr den richtigen Job bin ich nat√ºrlich gerne mobil. <strong>Hybrid & Remote</strong> sind f√ºr mich m√∂glich.</li>
                        <li><strong>Die Kultur:</strong> Ich suche ein Team, das "New Work" wirklich lebt. Offenheit, Humor und der Wille, Dinge besser zu machen, sind mir wichtiger als starre Hierarchien.</li>
                    </ul>
                    
                    <div style="margin-top: 30px;">
                        <a href="mailto:larandres1994@gmail.com" class="btn">Lass uns sprechen ‚Üí</a>
                    </div>
                </div>
            </div>
        </section>

    </div>

<!-- MINI GAME SECTION -->
<section style="min-height: 100vh; position: relative;">
    <div class="container">
        <h3 style="text-align: center;">Bonus Level</h3>
        <h2 style="text-align: center;">Can you catch my skills?</h2>
        <p style="text-align: center;">Klicke auf die fallenden Skills! Baue Combos auf f√ºr mehr Punkte! üéØ</p>
        
        <div class="game-container">
            <div class="game-stats" style="display:flex; justify-content:center; gap:18px; margin-bottom:10px;">
                <div class="stat">Score: <span id="score">0</span></div>
                <div class="stat">Combo: <span id="combo">0</span>x</div>
                <div class="stat">Time: <span id="timer">45</span>s</div>
            </div>
            
            <div class="achievements" id="achievements" style="text-align:center;"></div>
            
            <div class="canvas-wrapper">
                <canvas id="gameCanvas"></canvas>
                <div id="comboDisplay" class="combo-display"></div>
            </div>
            
            <div style="text-align:center;">
                <button class="btn" id="startGame" style="margin-top: 20px;">
                    Start Game üéÆ
                </button>
            </div>
            
            <div id="gameOver" class="game-over hidden" style="max-width:700px; margin: 20px auto;">
                <h2 id="finalScore"></h2>
                <p id="gameMessage"></p>
                <div id="badgesEarned" class="badges-earned"></div>
                <div style="margin-top:12px;">
                    <button class="btn" id="playAgain">Play Again</button>
                </div>
            </div>
        </div>
    </div>
</section>
    

    <footer style="padding: 50px 0; text-align: center; opacity: 0.5; font-size: 0.8rem; border-top: 1px solid var(--border-color);">
        &copy; 2026 Lara Marie Andres | <a href="mailto:larandres1994@gmail.com" style="color: inherit; text-decoration: none;">Kontakt</a><br>
    </footer>

    <script>
    // --- All JS initialised after DOMContentLoaded ---
    window.addEventListener('DOMContentLoaded', () => {

        // Scrollytelling (keine √Ñnderungen n√∂tig)
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                }
            });
        }, { threshold: 0.1 });
        document.querySelectorAll('section').forEach(section => observer.observe(section));

        // Tabs
        window.openTab = function(evt, tabName) {
            var contents = document.getElementsByClassName("tab-content");
            for (var i = 0; i < contents.length; i++) { contents[i].classList.remove("active"); }
            var buttons = document.getElementsByClassName("tab-btn");
            for (var i = 0; i < buttons.length; i++) { buttons[i].classList.remove("active"); }
            const target = document.getElementById(tabName);
            if (target) target.classList.add("active");
            if (evt && evt.currentTarget) evt.currentTarget.classList.add("active");
        };

        // Dark Mode Toggle (stores preference)
        const themeToggle = document.getElementById('themeToggle');
        function toggleTheme() {
            document.body.classList.toggle('dark-mode');
            const isDark = document.body.classList.contains('dark-mode');
            localStorage.setItem('theme', isDark ? 'dark' : 'light');
        }
        themeToggle.addEventListener('click', toggleTheme);

        // L√§dt gespeicherte Pr√§ferenz beim Seitenaufruf
        const savedTheme = localStorage.getItem('theme');
        if (savedTheme === 'dark') {
            document.body.classList.add('dark-mode');
        } else if (savedTheme === 'light') {
            document.body.classList.remove('dark-mode');
        } else if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.body.classList.add('dark-mode');
        }


        // === CATCH THE SKILLS GAME - FIXED/ENHANCED VERSION ===
        // (der Spiel-Code ist hier unver√§ndert √ºbernommen)
        const skillCategories = {
            hard: {
                skills: ['TYPO3', 'WordPress', 'HTML/CSS', 'Adobe CC', 'Canva Pro', 'MS Office', 'Projektmgmt', 'Content-CMS', 'SEO', 'Analytics'],
                color: '#0096FF',
                points: 10
            },
            soft: {
                skills: ['Strategie', 'Storytelling', 'Teamwork', 'Resilienz', 'Empathie', 'Priorisierung', 'Agilit√§t', 'Leadership', 'Kreativit√§t'],
                color: '#FF6B5A',
                points: 15
            },
            languages: {
                skills: ['Englisch C2', 'Franz√∂sisch A2', 'Deutsch Native'],
                color: '#B8B4AC',
                points: 20
            },
            tools: {
                skills: ['Social Media', 'Newsletter', 'Webdesign', 'Grafik', 'Community Mgmt', 'Event Mgmt', 'Redaktion'],
                color: '#5586FF',
                points: 12
            },
            powerups: {
                skills: ['‚ö° 2x Score', 'üïê Slow-Mo', 'üß≤ Magnet', '‚≠ê Bonus'],
                color: '#FFD93D',
                points: 0,
                isPowerUp: true
            }
        };

        let gameActive = false;
        let score = 0;
        let timeLeft = 45;
        let combo = 0;
        let comboTimer = null;
        let maxCombo = 0;
        let fallingSkills = [];
        let particles = [];
        let powerUps = { doubleScore: 0, slowMotion: 0, magnet: 0 };
        let difficulty = 1;
        let animationId = null;
        let timerInterval = null;
        let spawnInterval = null;
        let achievementsUnlocked = new Set();

        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas ? canvas.getContext('2d') : null;
        const startBtn = document.getElementById('startGame');
        const comboDisplay = document.getElementById('comboDisplay');
        const playAgainBtn = document.getElementById('playAgain');

        const achievements = {
            'first-catch': { name: 'üéØ First Catch', threshold: 1 },
            'combo-master': { name: 'üî• Combo Master', threshold: 10 },
            'speed-demon': { name: '‚ö° Speed Demon', threshold: 20 },
            'collector': { name: 'üíé Collector', threshold: 50 },
            'legend': { name: 'üëë Legend', threshold: 100 }
        };

        // safety: only run canvas/game code if canvas supported
        function supportsCanvas() {
            return !!(canvas && ctx);
        }

        // helper: rounded rectangle path
        function roundRect(ctx, x, y, w, h, r) {
            const radius = r || 6;
            ctx.beginPath();
            ctx.moveTo(x + radius, y);
            ctx.arcTo(x + w, y, x + w, y + h, radius);
            ctx.arcTo(x + w, y + h, x, y + h, radius);
            ctx.arcTo(x, y + h, x, y, radius);
            ctx.arcTo(x, y, x + w, y, radius);
            ctx.closePath();
        }

        if (supportsCanvas()) {
            // Canvas setup with retina support
            function resizeCanvas() {
                const dpr = window.devicePixelRatio || 1;
                const rect = canvas.getBoundingClientRect() || { width: 600, height: 360 };
                
                // Reset transform before resizing
                ctx.setTransform(1, 0, 0, 1, 0, 0);
                
                canvas.width = Math.max(300, Math.floor(rect.width * dpr));
                canvas.height = Math.max(150, Math.floor(rect.height * dpr));
                canvas.style.width = rect.width + 'px';
                canvas.style.height = rect.height + 'px';
                ctx.scale(dpr, dpr);
            }
            resizeCanvas();
            window.addEventListener('resize', resizeCanvas);

            // Particle Effect
            class Particle {
                constructor(x, y, color) {
                    this.x = x;
                    this.y = y;
                    this.vx = (Math.random() - 0.5) * 8;
                    this.vy = (Math.random() - 0.5) * 8 - 2;
                    this.alpha = 1;
                    this.size = Math.random() * 4 + 2;
                    this.color = color;
                    this.life = 60;
                }

                update() {
                    this.x += this.vx;
                    this.y += this.vy;
                    this.vy += 0.3; // Gravity
                    this.alpha -= 0.02;
                    this.life--;
                }

                draw() {
                    ctx.globalAlpha = Math.max(0, this.alpha);
                    ctx.fillStyle = this.color;
                    ctx.beginPath();
                    ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                    ctx.fill();
                    ctx.globalAlpha = 1;
                }
            }

            // Enhanced Skill Object
            class Skill {
                constructor(forcePowerUp = false) {
                    const categories = Object.keys(skillCategories);
                    let categoryKey;
                    
                    if (forcePowerUp) {
                        categoryKey = 'powerups';
                    } else if (Math.random() < 0.15) { // 15% chance for power-up
                        categoryKey = 'powerups';
                    } else {
                        categoryKey = categories[Math.floor(Math.random() * (categories.length - 1))];
                    }
                    
                    const category = skillCategories[categoryKey];
                    this.text = category.skills[Math.floor(Math.random() * category.skills.length)];
                    this.color = category.color;
                    this.basePoints = category.points;
                    this.isPowerUp = category.isPowerUp || false;
                    
                    const rect = canvas.getBoundingClientRect();
                    this.canvasWidth = rect.width;
                    this.canvasHeight = rect.height;
                    
                    // Dynamic sizing
                    ctx.font = 'bold 15px "Space Grotesk", sans-serif';
                    const textWidth = ctx.measureText(this.text).width;
                    this.width = Math.max(textWidth + 40, 110);
                    this.height = 50;
                    
                    // Spawn position
                    this.x = Math.random() * (this.canvasWidth - this.width);
                    this.y = -80;
                    
                    // Speed based on difficulty
                    this.speed = (1.2 + Math.random() * 1.5) * difficulty;
                    
                    // Wobble effect
                    this.wobble = Math.random() * Math.PI * 2;
                    this.wobbleSpeed = 0.05 + Math.random() * 0.05;
                    
                    // Magnet effect
                    this.magnetized = false;
                }

                update(mouseX, mouseY) {
                    this.y += this.speed * (powerUps.slowMotion > 0 ? 0.5 : 1);
                    this.wobble += this.wobbleSpeed;
                    
                    // Magnet effect
                    if (powerUps.magnet > 0 && mouseY !== null) {
                        const dx = mouseX - (this.x + this.width / 2);
                        const dy = mouseY - (this.y + this.height / 2);
                        const distance = Math.sqrt(dx * dx + dy * dy);
                        
                        if (distance < 150) {
                            this.x += dx * 0.03;
                            this.y += dy * 0.03;
                            this.magnetized = true;
                        }
                    }
                }

                draw() {
                    const wobbleOffset = Math.sin(this.wobble) * 3;
                    ctx.save();
                    ctx.translate(this.x + wobbleOffset, this.y);
                    
                    // Shadow
                    ctx.shadowColor = 'rgba(0, 0, 0, 0.15)';
                    ctx.shadowBlur = 10;
                    ctx.shadowOffsetY = 4;

                    // Glow for power-ups
                    if (this.isPowerUp) {
                        ctx.shadowColor = this.color;
                        ctx.shadowBlur = 20;
                    }

                    // Box with gradient
                    const gradient = ctx.createLinearGradient(0, 0, this.width, 0);
                    gradient.addColorStop(0, this.color);
                    gradient.addColorStop(1, this._adjustColor(this.color, -20));
                    
                    ctx.fillStyle = gradient;
                    roundRect(ctx, 0, 0, this.width, this.height, 16);
                    ctx.fill();

                    // Border for magnetized
                    if (this.magnetized) {
                        ctx.strokeStyle = '#FFD93D';
                        ctx.lineWidth = 3;
                        ctx.stroke();
                    }

                    // Text
                    ctx.shadowBlur = 0;
                    ctx.fillStyle = '#FFFFFF';
                    ctx.font = `bold ${this.isPowerUp ? '18px' : '15px'} "Space Grotesk", sans-serif`;
                    ctx.textAlign = 'center';
                    ctx.textBaseline = 'middle';
                    ctx.fillText(this.text, this.width / 2, this.height / 2);
                    
                    ctx.restore();
                }

                _adjustColor(color, amount) {
                    const num = parseInt(color.replace('#', ''), 16);
                    const r = Math.max(0, Math.min(255, (num >> 16) + amount));
                    const g = Math.max(0, Math.min(255, ((num >> 8) & 0x00FF) + amount));
                    const b = Math.max(0, Math.min(255, (num & 0x0000FF) + amount));
                    return `#${((r << 16) | (g << 8) | b).toString(16).padStart(6, '0')}`;
                }

                isClicked(mouseX, mouseY) {
                    const wobbleOffset = Math.sin(this.wobble) * 3;
                    return mouseX > this.x + wobbleOffset && 
                           mouseX < this.x + wobbleOffset + this.width &&
                           mouseY > this.y && 
                           mouseY < this.y + this.height;
                }
            }

            // Game control functions
            function updateUI() {
                document.getElementById('score').textContent = score;
                document.getElementById('combo').textContent = combo;
                
                const comboStat = document.querySelector('.stat:nth-child(2)');
                if (combo >= 5 && comboStat) {
                    comboStat.classList.add('combo-active');
                } else if (comboStat) {
                    comboStat.classList.remove('combo-active');
                }
            }

            function showComboText(text) {
                comboDisplay.textContent = text;
                comboDisplay.classList.remove('show');
                void comboDisplay.offsetWidth; // Trigger reflow
                comboDisplay.classList.add('show');
                setTimeout(() => comboDisplay.classList.remove('show'), 900);
            }

            function resetCombo() {
                combo = 0;
                updateUI();
            }

            function activatePowerUp(type) {
                if (type.includes('2x Score')) {
                    powerUps.doubleScore = 10;
                    showComboText('2x SCORE!');
                } else if (type.includes('Slow-Mo')) {
                    powerUps.slowMotion = 8;
                    showComboText('SLOW MOTION!');
                } else if (type.includes('Magnet')) {
                    powerUps.magnet = 12;
                    showComboText('MAGNET!');
                } else if (type.includes('Bonus')) {
                    score += 50;
                    showComboText('+50 BONUS!');
                }
                updateUI();
            }

            function updatePowerUps() {
                if (powerUps.doubleScore > 0) powerUps.doubleScore--;
                if (powerUps.slowMotion > 0) powerUps.slowMotion--;
                if (powerUps.magnet > 0) powerUps.magnet--;
            }

            function checkAchievements() {
                Object.keys(achievements).forEach(key => {
                    if (achievementsUnlocked.has(key)) return;
                    
                    const achievement = achievements[key];
                    let unlocked = false;
                    
                    if (key === 'first-catch' && score >= achievement.threshold) unlocked = true;
                    if (key === 'combo-master' && maxCombo >= achievement.threshold) unlocked = true;
                    if (key === 'speed-demon' && score >= achievement.threshold * 2) unlocked = true;
                    if (key === 'collector' && score >= achievement.threshold * 10) unlocked = true;
                    if (key === 'legend' && score >= achievement.threshold * 10) unlocked = true;
                    
                    if (unlocked) {
                        achievementsUnlocked.add(key);
                        showAchievement(achievement.name);
                    }
                });
            }

            function showAchievement(name) {
                const badge = document.createElement('div');
                badge.className = 'achievement-badge';
                badge.textContent = name;
                document.getElementById('achievements').appendChild(badge);
            }

function endGame() {
    gameActive = false;
    if (timerInterval) { clearInterval(timerInterval); timerInterval = null; }
    if (spawnInterval) { clearInterval(spawnInterval); spawnInterval = null; }
    if (animationId) { cancelAnimationFrame(animationId); animationId = null; }

    // WICHTIG: Canvas leeren und Skills entfernen
    fallingSkills = [];
    particles = [];
    const rect = canvas.getBoundingClientRect();
    ctx.clearRect(0, 0, rect.width * 2, rect.height * 2);


                let message = '';
                let rank = '';
                
                if (score >= 2000) { 
                    message = 'üèÜ LEGENDARY! Du bist ein absoluter Profi!';
                    rank = 'S-Tier';
                } else if (score >= 1500) { 
                    message = 'üî• AMAZING! Wir sollten definitiv reden!';
                    rank = 'A-Tier';
                } else if (score >= 1000) { 
                    message = '‚ú® GREAT! Solide Performance!';
                    rank = 'B-Tier';
                } else { 
                    message = 'üí™ Guter Start! Versuch es nochmal!';
                    rank = 'C-Tier';
                }

                document.getElementById('finalScore').textContent = `${score} Punkte (${rank})`;
                document.getElementById('gameMessage').textContent = message;
                
                // Show badges
                const badgesDiv = document.getElementById('badgesEarned');
                badgesDiv.innerHTML = '';
                if (achievementsUnlocked.size > 0) {
                    badgesDiv.innerHTML = '<p style="margin-bottom: 10px;"><strong>Achievements:</strong></p>';
                    achievementsUnlocked.forEach(key => {
                        const badge = document.createElement('span');
                        badge.className = 'badge';
                        badge.textContent = achievements[key].name;
                        badgesDiv.appendChild(badge);
                    });
                }
                if (maxCombo >= 10) {
                    const badge = document.createElement('span');
                    badge.className = 'badge';
                    badge.textContent = `üî• Max Combo: ${maxCombo}x`;
                    badgesDiv.appendChild(badge);
                }
                
                document.getElementById('gameOver').classList.remove('hidden');
            }

            function gameLoop() {
                if (!gameActive) return;

                const rect = canvas.getBoundingClientRect();
                ctx.clearRect(0, 0, rect.width, rect.height);

                // Update and draw skills
                for (let i = fallingSkills.length - 1; i >= 0; i--) {
                    const skill = fallingSkills[i];
                    skill.update(mouseX, mouseY);
                    skill.draw();

                    if (skill.y > rect.height + 60) {
                        fallingSkills.splice(i, 1);
                        resetCombo();
                    }
                }

                // Update and draw particles
                for (let i = particles.length - 1; i >= 0; i--) {
                    const p = particles[i];
                    p.update();
                    p.draw();
                    if (p.life <= 0) particles.splice(i, 1);
                }

                animationId = requestAnimationFrame(gameLoop);
            }

            // Interaction Handler
            let mouseX = null;
            let mouseY = null;

            canvas.addEventListener('mousemove', (e) => {
                const rect = canvas.getBoundingClientRect();
                mouseX = e.clientX - rect.left;
                mouseY = e.clientY - rect.top;
            });

            function handleInteraction(e) {
                if (!gameActive) return;

                const rect = canvas.getBoundingClientRect();
                let clickX, clickY;

                if (e.type === 'click' || e.type === 'mousedown') {
                    clickX = e.clientX - rect.left;
                    clickY = e.clientY - rect.top;
                } else if (e.type === 'touchstart') {
                    if (e.touches && e.touches[0]) {
                        clickX = e.touches[0].clientX - rect.left;
                        clickY = e.touches[0].clientY - rect.top;
                    }
                }

                let caught = false;

                for (let i = fallingSkills.length - 1; i >= 0; i--) {
                    const skill = fallingSkills[i];
                    if (skill.isClicked(clickX, clickY)) {
                        caught = true;
                        
                        // Handle power-ups
                        if (skill.isPowerUp) {
                            activatePowerUp(skill.text);
                        } else {
                            // Normal skill
                            const points = skill.basePoints * (1 + combo * 0.1) * (powerUps.doubleScore > 0 ? 2 : 1);
                            score += Math.floor(points);
                            combo++;
                            
                            if (combo > maxCombo) maxCombo = combo;
                            
                            // Combo display
                            if (combo >= 5) {
                                showComboText(`${combo}x COMBO!`);
                            }
                            
                            checkAchievements();
                            updateUI();
                        }
                        
                        // Particles
                        for (let p = 0; p < 15; p++) {
                            particles.push(new Particle(
                                clickX, 
                                clickY, 
                                skill.color
                            ));
                        }
                        
                        fallingSkills.splice(i, 1);
                        
                        // Reset combo timer
                        clearTimeout(comboTimer);
                        comboTimer = setTimeout(resetCombo, 2000);
                        break;
                    }
                }
            }

            canvas.addEventListener('click', handleInteraction);
            canvas.addEventListener('touchstart', handleInteraction, { passive: false });

            // Start Game
            function startGame() {
                if (gameActive) return;
                gameActive = true;
                score = 0;
                combo = 0;
                maxCombo = 0;
                timeLeft = 45;
                difficulty = 1;
                fallingSkills = [];
                particles = [];
                achievementsUnlocked.clear();
                powerUps = { doubleScore: 0, slowMotion: 0, magnet: 0 };
                
                updateUI();
                document.getElementById('gameOver').classList.add('hidden');
                document.getElementById('achievements').innerHTML = '';
                document.getElementById('timer').textContent = timeLeft;
                
                canvas.classList.add('active');
                startBtn.style.display = 'none';
                playAgainBtn.style.display = 'inline-flex';

                resizeCanvas();

                // spawn interval (uses setInterval reference stored globally so we can clear it)
                let currentSpawnRate = 800;
                spawnInterval = setInterval(() => {
                    if (!gameActive) {
                        clearInterval(spawnInterval);
                        spawnInterval = null;
                        return;
                    }
                    fallingSkills.push(new Skill());
                }, currentSpawnRate);

                // timer
                timerInterval = setInterval(() => {
                    timeLeft--;
                    updatePowerUps();
                    document.getElementById('timer').textContent = timeLeft;
                    
                    // Gradually increase difficulty every 10 seconds
                    if (timeLeft % 10 === 0 && timeLeft > 0) {
                        difficulty += 0.15;
                    }

                    if (timeLeft <= 0) {
                        endGame();
                    }
                }, 1000);

                // Kick off game loop
                gameLoop();
            }

            // Button bindings
            startBtn.addEventListener('click', startGame);
            playAgainBtn.addEventListener('click', () => {
                // Restart proper
                if (timerInterval) clearInterval(timerInterval);
                if (spawnInterval) clearInterval(spawnInterval);
                if (animationId) cancelAnimationFrame(animationId);
                document.getElementById('gameOver').classList.add('hidden');
                startBtn.style.display = 'none';
                startGame();
            });
        } // end supportsCanvas

// Smooth parallax for the flow ribbon
(function ribbonParallax() {
  const ribbon = document.querySelector('.flow-ribbon');
  if (!ribbon) return;

  let ticking = false;
  
  function onScroll() {
    if (!ticking) {
      window.requestAnimationFrame(update);
      ticking = true;
    }
  }

  function update() {
    const scrollY = window.scrollY || window.pageYOffset;
    const docHeight = document.documentElement.scrollHeight - window.innerHeight;
    const scrollProgress = Math.min(scrollY / docHeight, 1);
    
    // Ribbon bewegt sich langsamer als Scroll (Parallax) + leichte Rotation
    const translateY = scrollY * 0.3;
    const rotate = scrollProgress * 5; // Leichte Rotation beim Scrollen
    
    ribbon.style.transform = `translateY(${translateY}px) rotate(${rotate}deg)`;
    ticking = false;
  }

  window.addEventListener('scroll', onScroll, { passive: true });
  update(); // Initial call
})();
        
    }); // end DOMContentLoaded
    </script>

</body>
</html>
